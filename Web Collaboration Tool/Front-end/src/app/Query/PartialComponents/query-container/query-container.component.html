<mat-card-header>
  <mat-card-title> {{ query ? query.title : null }} </mat-card-title>
  <mat-card-subtitle>
    {{ query ? query.subtitle : null }}
  </mat-card-subtitle>

</mat-card-header>

<mat-card-content>
  <mat-error>{{ errorMessage }}</mat-error>
  <p class="query-text">{{ query.contents }}</p>
  <app-query-vote [query] = "query" (queryVotedEvent) = "onQueryVote($event)"
                  (queryVoteFailedEvent) = "onQueryVoteFailure($event)">
  </app-query-vote>
  <span class="mat-caption">Posted by:&nbsp;</span>
  <a [routerLink] = "['/user', query ? query.username : '']">{{ query ?
    query.username : null }} </a>
</mat-card-content>

<mat-card-footer>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon>reply</mat-icon>
        &nbsp; Post a response
      </mat-panel-title>
      <mat-panel-description>
        Respond to this query here
      </mat-panel-description>
    </mat-expansion-panel-header>

    <form [formGroup] = "queryResponseForm" (ngSubmit) = "onSubmit(query.id)">
      <mat-form-field>
        <mat-label>Response text</mat-label>
          <textarea matInput placeholder = "Enter your response..." name = "response"
                    formControlName = "contents">
          </textarea>
      </mat-form-field>

      <mat-action-row>
        <button mat-raised-button color = "primary" type = "submit"
                [disabled] = "!queryResponseForm.valid">Respond
        </button>
      </mat-action-row>
    </form>
  </mat-expansion-panel>
</mat-card-footer>
